GIScore Release Notes
---------------------

These are the release notes for the GIScore library. At a minimum, this file
attempts to document changes to the public APIs. This file also provides a
high-level overview of the features added in each release.

This product includes software developed by the JDOM Project (http://www.jdom.org/).

------------------------------------------------------------------------------

Release 0.5.23

This release primarily introduces enhancenments and minor bug-fixes to KML input/output
and some underlying XML handling.

General
  * Added ListStyle support to Style/KmlOutputStream/KmlInputStream
  * Update geodesy 1.9.14 using short-cut from Geodetic2DPoint.getLatitude().inDegrees()
    to Geodetic2DPoint.getLatitudeAsDegrees().
  * Add @Nullable/@CheckForNull annotations to methods in GroundOverlay, Overlay, Style, etc.
  * Added getEncoding() to XmlInputStream, KmlInputStream, KmlReader so output stream can have
    correct character encoding if not UTF-8 used

Common
  * Fix setStyleUrl() to auto-fix the url if relative idref and '#' not first character

GISFactory
  * Added encoding (String) as first argument to KML + KMZ type in getOutputStream()
    so can match correct character encoding

KmzOutputStream
  * Added public KmzOutputStream(OutputStream stream, String encoding) constructor

XmlGdbOutputStream
  * Update close() and close streams in finally block to close even if exception thrown

GroundOverlay
  * Added setBoundingBox(Geodetic2DBounds box) to set overlay bounding box from Geodetic2DBounds

Style
  * Change double to Double and boolean to Boolean in field types and associated getters/setters to allow Nullable values.

UrlRef
  * Update User-Agent to Google Earth 5.2 identifier
  * Add new methods: isIdentifier(), isXMLNameCharacter(), isXMLNameStartCharacter()
  * Updated escapeUri() to handle ascii control chars 00-2f and extended 7f-ff


------------------------------------------------------------------------------

Release 0.5.24

This release primarily introduces cleanup and bug-fixes to KML input/output and some underlying XML handling.

Fixed bug in KmlWriter that did not close all image entries in created KMZ file
creating corrupt ZIP file. Added flag to underlying KmlOutputStream/XmlOutputStreamBase classes.

StyleMap
-add containsKey() method + added NORMAL/HIGHLIGHT constants

KmlInputStream
-Updated StyleMap handling

UrlRef
-Added check in escapeUri() to escape all control chars (ASCII code < 0x20) and extended chars (code >= 0x7f)

------------------------------------------------------------------------------

Release 0.5.25

This release fixes minor bugs in KML input/output, Schema, and Polygon point handling.

Polygon
-fix getPoints(). failed if points in "wrong" order.
 Puts outer ring points in clockwise order and inner ring points in ccw order

KmlInputStream
-fix interpreting KML elements as non-kml/foreign elements if kml root element does not declare explicit kml namespace

KmlOutputStream
-Properly escape schema id value in output

UrlRef
-updated isIdentifier() to allow %HH URI-escaping
-added isHexDegit()

Schema
-Update setName() to normalize name value stripping leading/trailing whitespace and not allow blank strings as valid

KmlMetaDump.java
-Add check for suspicious Schema id/name characters to enforce Schema id/name constraints

------------------------------------------------------------------------------

Release 0.5.26

This release fixes minor bugs in KML handling and updated geodesy library with Geodetic3DBounds fixes.

LinearRing
-Fixed LinearRing(Geodetic2DBounds box) to check for 3D bbox and create 3d points accordingly at max elevation height

KmlInputStream
-Handle ArrayIndexOutOfBoundsException in read() such that read gracefully fails

KmlReader
-Added KmlReader(InputStream is, boolean isCompressed, URL baseUrl, Proxy proxy) constr

KmlMetaDump
-added custom log4j Appender to capture warn/errors logged by KML classes and add them to summary of errors/warnings.
-updated checkGeometry() to check Lines, Polygons and LinearRings.
-added check for duplicate consecutive points
-added checks:
 * comma found instead of whitespace between tuples (error)
 * ignore invalid character in coordinate string (error)
 * ignore invalid string in coordinate (error)
 * Line clipped at DateLine (info)
 * Inner rings in Polygon must not overlap with each other (warn)
 * LinearRing must start and end with the same point (error)
 * LinearRing can not self-intersect (warn)
 * Bad poly found, no outer ring (error)

Add support for "open" element on KML input and output for containers
-Added IContainerType with changes to NetworkLink, ContainerStart, KmlInputStream, and KmlOutputStream

XmlInputStream
-Change skipNextElement() accessibility from public to protected

Added java.net.Proxy to UrlRef/KmlReader to proxy URL connections

Updated dependency: itf-geodesy 1.9.14 -> 1.9.16 with Geodetic3DBounds fixes

------------------------------------------------------------------------------

Release 0.5.27

This release fixes minor bugs and enhancements in KML and Shape file handling.

ShapefileInputStream
-Allow file argument in constructor to be directory or single .shp file

Added getType() to IContainerType interface

Add support for Snippet/snippet in KmlInputStream/KmlOutputStream

Added crossDateLine() to GroundOverlay

Updated KmlOutputStream.handleOverlay() and KmlInputStream.handleLatLonBox
to normalize LatLonBox coords if needed.

KmlMetaDump
- Added checks:
  * Feature uses merged shared/inline Style (info)
  * Feature uses shared Style (info)
  * Shared styles in Folder not allowed [ATC 7] (warning)
  * Shared styles must have 'id' attribute [ATC 7] (warning)
  * StyleUrl must contain '#' with identifier reference
  * GroundOverlay fails to satisfy east > west constraint [ATC 11]
  * GroundOverlay fails to satisfy north > south constraint [ATC 11]
  * GroundOverlay spans -180/+180 longitude line

------------------------------------------------------------------------------

Release 0.5.28

This release fixes minor bugs and enhancements in KML handling. Also fixes
NullPointerException bugs in two geometry classes.

KmlInputStream
-Fixed parsing drawOrder in GroundOverlay allowing whitespace in value and catching exception for non-numeric values
-Allow '#' prefix in color values as does Google Earth
-Add better handling of HTML markup in name field

KmlReader
-Replace ZipFile with ZipInputStream which is not as strict in validation of zip header fields

KmlOutputStream
-Handle Circle geometry and generate Line/Ring/Poly depending on circle hints types
-Added getNumCirclePoints()
-Corrected output order of elements for ListStyle
-Fix order of gx:balloonVisibility in output

KmlMetaDump
-Fixed bug that aborted scan of directories if failed to open a file
-Fixed parsing tilt in LookAt with non-numeric values

Circle
-Fixed NullPointerException in equals(Circle) if argument was null

Point
-Simplified null check logic forcing "pt" field to always be non-null
-Fixed NullPointerException in equals(Point) if argument was null

------------------------------------------------------------------------------

Release 0.6.0

Overhauled how Styles and StyleMaps are handled in KML I/O.
Note giscore 0.6.0 is not fully backward compatible with 0.5.28 with respect to
KML handling due to these changes.

 Previously styles were written before the target feature they are to be children
 of (Feature or ContainerStart) and were queued internally. Externally the order
 of Styles read were reversed from the order in the KML source.

 Now the order of all elements including Styles and StyleMaps is preserved in
 reading in KmlInputStream. Likewise, adding a Style is now done by calling
 setStyle() on a Feature or addStyle() on a ContainerStart element as opposed
 to writing the Style object to the stream immediately before writing the feature
 to the stream.

KmlReader, KmlWriterm KmlInputStream, KmlOutputStream, and KmlMetaDump changed to support
changes in Style handling.

Updated dependency itf-geodesy library to 1.9.23 incorporating numerous bug fixes

Feature
-Added style field + getStyle/getStyle methods
-implement equals(Object obj) + hashCode()

MultiPoint/LinearRing/Polygon
-force private fields to be non-null in default constructor

Model
-added null values checks

AbstractObject
-implement equals(Object obj) + hashCode()

Row
-implement explicit hashCode() rather than using inefficient HashCodeBuilder.reflectionHashCode()

ContainerStart
-add styles field + getStyles/setStyles/addStyle methods
-implement equals(Object obj) + hashCode()

Overlay
-implement equals(Object obj) + hashCode()

SimpleObjectOutputStream/SimpleObjectInputStream
-Add support for Color as scalar
-Added support for serializing enumeration values

SimpleObjectInputStream
-added readNonNullObjectCollection()

Style
-Added readData() + writeData() for serialization

StyleMap
-Added support for inline Styles
-Added readData() + writeData() for serialization
-Added new Pair class used by StyleMap.

AtomHeader
-Fixed serialization with changes to readData()

SimpleField
-change field access from package protected to private

XmlOutputStreamBase
-Fixed bug in escapeAttribute() that output attribute name for the value replacing the actual value

AtomLink
-Fix potential NullpointerException in writeData() if type is null

------------------------------------------------------------------------------

